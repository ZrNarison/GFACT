{% set ap = app.user %}
{{form_start(filtre)}}
    <div class="float-start mb-2">
        <div class="float-start ">
            {{form_row(filtre.DateDps)}}
        </div>
        <div class="float-start ">
            {{form_row(filtre.Datefin)}}
        </div>
        <div class="col-2 float-end " visible="false"></div>
            <button type="submit" class="btn btn-outline-secondary " id="search">Filtrer</button>
    </div>
    {% if search.DateDps is not null and search.Datefin is not null %}
    <a href="{{ path('printdepense', {'slug': search.DateDps.format('Y-m-d'), 'slug1': search.Datefin.format('Y-m-d')}) }}" class="btn btn-outline-success mb-2 btn btn-sm float-end">Rapport</a>
{% endif %}


{{form_end(filtre)}}
{% if Depense | length > 0 %} 
    <table class="table table-striped table table-hover bg-success">
        <thead class="text-white text-uppercase">
            <tr>
                <th>date</th>
                <th>Désignation</th>
                <th class="text-end">Quantité</th>
                <th class="text-end">Prix unitaire</th>
                <th class="text-end">Montant</th>
                {% for roles in ap.userRoles %}
                {% if roles|upper == "ROLE_ADMIN" %}
                <th class=" fs-3 text-center">Action</th>
                {% endif %}
                {% endfor %} 
            </tr>
        </thead>
    {% for Depense in Depense %}
        <tbody class="bg-white">
            <tr>
                <td>{{Depense.DateDps|date("d/m/Y")}}</td>
                <td class="text-center">{{Depense.Designation}}</td>
                <td class="text-end">{{Depense.Qte}}</td>
                <td class="text-end">{{Depense.PrixUnitaire|number_format(0, ',', ' ')}}</td>
                <td class="text-end">{{(Depense.Qte * Depense.PrixUnitaire)|number_format(0, ',', ' ')}}</td>
                {% for roles in ap.userRoles %}
                {% if roles|upper == "ROLE_ADMIN" %}
                <td class="text-center col-1">
                    <a href="{{path ('editdps',{'slug':Depense.slug})}}" class="float-start btn btn-sm "><i class="fa-solid fa-pen-to-square text-success"></i></a>
                    <a onclick="return confirm('Vous êtes sûr de la supprimer ?');" href="{{path ('deldepense',{'slug':Depense.id})}}" class="float-end btn btn-sm"><i class="fas fa-trash text-danger"></i></a>
                <td>
                {% endif %}
                {% endfor %}
            </tr>
        </tbody>
    {% endfor %}
    </table>
{% else %}
    <p class="h1 text-center text-danger text-uppercase mt-5"><em>Aucun enregistrement trouvé</em></p>
{% endif %}