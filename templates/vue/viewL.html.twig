{% extends 'base.html.twig' %}
{% block body %}
{% set ap = app.user %}
<div class="container mt-3">
    <p class="my-3 text-center text-white fs-3">Liste des toutes le client</p>
    <div class="container row float-none">
        {% if client | length > 0 %}
            <table class="table table-striped table table-hover bg-success">
                <thead class="text-white text-uppercase">
                    <tr>
                        <th>Nom</th>
                        <th>Adress</th>
                        <th>Telephone</th>
                        <th class="text-start">Client</th>
                    {% for roles in ap.userRoles %}
                        {% if roles|upper != "ROLE_SUPERADMIN" %}
                            <th class="text-center">enregistreur</th>
                            <th class="text-danger text-uppercase fs-5">Action</th>
                        {% elseif roles|upper == "ROLE_SUPERADMIN" %}
                            <th class="text-center">enregistreur</th>
                        {% endif %}
                    {% endfor %}
                    </tr>
                </thead>
                {% for l in client %}
                <tbody class="bg-white">
                    <tr>
                        <td>{{l.Clients.NomCl|upper}}</td>
                        <td>{{l.Clients.Adress|upper}}</td>
                        <td>{{l.Clients.Tel}}</td>
                        <td>{{l.ClSlug|upper}}</td>
                        {% for roles in ap.userRoles %}
                            {% if roles|upper != "ROLE_SUPERADMIN" %}
                                {% for user in user %}
                                    {% if l.Clients.User == user.id %}
                                        <th class="text-center">{{user.Pseudo|upper}}</th>
                                    {% endif %}    
                                {% endfor %}
                                <td class=" col-1">
                                {% if l.Clients.User == UserConnected.id %}
                                    <a href="{{path('EditClient',{'client':l.Clients.Slug})}}" class=" col-1 btn btn-sm"><i class="fa fa-male" aria-hidden="true"></i></a>
                                    <a href="{{path('editcclient',{'slug':l.ClSlug})}}" class="col-1 btn btn-sm"><i class="fa-solid fa-pen-to-square"></i></a>
                                    <a onclick="return confirm('Etes vous sur d avoir supprimer le client nommé  {{l.Clients.NomCl|upper}} ?')" href="{{path('delclient',{'slug':l.Clients.Slug})}}" class="btn btn-sm col-1 "><i class="fas fa-trash"></i></a>
                                {% endif %}  
                            {% elseif roles|upper == "ROLE_SUPERADMIN" %}
                                {% for user in user %}
                                    {% if l.Clients.User == user.id %}
                                        <th class="text-center">{{user.Pseudo|upper}}</th>
                                    {% endif %}    
                                {% endfor %}
                            {% endif %}
                        {% endfor %}
                        <td>
                    </tr>
                </tbody>
                {% endfor %}
            </table>
        {% else %}
            <p class="h1 text-danger text-center"><em>Aucun client enregistré</em></p>
        {% endif %}
    </div>
</div>
{% endblock %}